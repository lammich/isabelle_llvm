<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Predicate_Compile</title>
</head>


<body>
<div class="head">
<h1>Theory Predicate_Compile</h1>
</div>

<pre class="source"><span class="comment1"><span>(*  Title:      HOL/Predicate_Compile.thy
    Author:     Stefan Berghofer, Lukas Bulwahn, Florian Haftmann, TU Muenchen
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A compiler for predicates defined by introduction rules›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Predicate_Compile.html"><span>Predicate_Compile</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Random_Sequence.html"><span>Random_Sequence</span></a><span> </span><a href="Quickcheck_Exhaustive.html"><span>Quickcheck_Exhaustive</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>keywords</span></span></span><span>
  </span><span class="quoted"><span>"code_pred"</span></span><span> </span><span class="main"><span>::</span></span><span> thy_goal </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="quoted"><span>"values"</span></span><span> </span><span class="main"><span>::</span></span><span> diag
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_aux.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_aux.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_compilations.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_compilations.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/core_data.ML.html"><span>‹Tools/Predicate_Compile/core_data.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/mode_inference.ML.html"><span>‹Tools/Predicate_Compile/mode_inference.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_proof.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_proof.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_core.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_core.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_data.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_data.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_fun.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_fun.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_pred.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_pred.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile_specialisation.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile_specialisation.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Tools/Predicate_Compile/predicate_compile.ML.html"><span>‹Tools/Predicate_Compile/predicate_compile.ML›</span></a></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Set membership as a generator predicate›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  Introduce a new constant for membership to allow 
  fine-grained control in code equations. 
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Predicate_Compile.contains_def|fact"><span class="entity_def" id="Predicate_Compile.contains_def|thm"><span class="entity_def" id="Predicate_Compile.contains_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Predicate_Compile.contains|const"><span>contains</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>contains</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Predicate_Compile.contains_pred_def|fact"><span class="entity_def" id="Predicate_Compile.contains_pred_def|thm"><span class="entity_def" id="Predicate_Compile.contains_pred_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Predicate_Compile.contains_pred|const"><span>contains_pred</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><a class="entity_ref" href="Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred|type"><span>Predicate.pred</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>contains_pred</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.single|const"><span>Predicate.single</span></a><span> </span><span class="main"><a class="entity_ref" href="Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Orderings.html#Orderings.bot_class.bot|const"><span>bot</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1357..1362">lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.pred_of_setE|fact"><span class="entity_def" id="Predicate_Compile.pred_of_setE|thm"><span>pred_of_setE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate.html#Predicate.pred.eval|const"><span>Predicate.eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate.html#Predicate.pred_of_set|const"><span>pred_of_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#offset_1357..1362"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.pred_of_setI|fact"><span class="entity_def" id="Predicate_Compile.pred_of_setI|thm"><span>pred_of_setI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>==&gt;</span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred.eval|const"><span>Predicate.eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate.html#Predicate.pred_of_set|const"><span>pred_of_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.pred_of_set_eq|fact"><span class="entity_def" id="Predicate_Compile.pred_of_set_eq|thm"><span>pred_of_set_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate.html#Predicate.pred_of_set|const"><span>pred_of_set</span></a><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred.Pred|const"><span>Predicate.Pred</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred_of_set_def|fact"><span>pred_of_set_def</span></a><span> </span><a class="entity_ref" href="Fun.html#Fun.o_def|fact"><span>o_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.containsI|fact"><span class="entity_def" id="Predicate_Compile.containsI|thm"><span>containsI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>==&gt;</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1787..1792">lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.containsE|fact"><span class="entity_def" id="Predicate_Compile.containsE|thm"><span>containsE</span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="free"><span>x'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#offset_1787..1792"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.contains_predI|fact"><span class="entity_def" id="Predicate_Compile.contains_predI|thm"><span>contains_predI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>==&gt;</span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred.eval|const"><span>Predicate.eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_def|fact"><span>contains_pred_def</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2040..2045">lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.contains_predE|fact"><span class="entity_def" id="Predicate_Compile.contains_predE|thm"><span>contains_predE</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate.html#Predicate.pred.eval|const"><span>Predicate.eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#offset_2040..2045"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_def|fact"><span>contains_pred_def</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.contains_pred_eq|fact"><span class="entity_def" id="Predicate_Compile.contains_pred_eq|thm"><span>contains_pred_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred.Pred|const"><span>Predicate.Pred</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL.html#HOL.eq_reflection|fact"><span>eq_reflection</span></a><span class="main"><span>)</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_def|fact"><span>contains_pred_def</span></a><span> </span><a class="entity_ref" href="HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred_eqI|fact"><span>pred_eqI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Predicate_Compile.contains_pred_notI|fact"><span class="entity_def" id="Predicate_Compile.contains_pred_notI|thm"><span>contains_pred_notI</span></span></span><span class="main"><span>:</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>==&gt;</span></span><span> </span><a class="entity_ref" href="Predicate.html#Predicate.pred.eval|const"><span>Predicate.eval</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate.html#Predicate.not_pred|const"><span>Predicate.not_pred</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_def|fact"><span>contains_pred_def</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_def|fact"><span>contains_def</span></a><span> </span><a class="entity_ref" href="Predicate.html#Predicate.not_pred_eq|fact"><span>not_pred_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>Fun</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Predicate_Compile_Aux.Fun</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>Input</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Predicate_Compile_Aux.Input</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>Output</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Predicate_Compile_Aux.Output</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>Bool</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Predicate_Compile_Aux.Bool</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>io</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Fun</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Input</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Fun</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Output</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Bool</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ii</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Fun</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Input</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Fun</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Input</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Bool</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
  </span><span>Core_Data.PredData.map</span><span> </span><span class="main"><span>(</span></span><span>Graph.new_node</span><span> 
    </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span>›</span></span><span class="main"><span>,</span></span><span> 
     </span><span class="entity"><span>Core_Data.PredData</span></span><span> </span><span class="main"><span>{</span></span><span>
       pos </span><span class="main"><span>=</span></span><span> </span><span>Position.thread_data</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
       intros </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span>NONE</span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.containsI|fact"><span>containsI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> 
       elim </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.containsE|fact"><span>containsE</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> 
       preprocessed </span><span class="main"><span>=</span></span><span> </span><span>true</span><span class="main"><span>,</span></span><span>
       function_names </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="entity"><span>Predicate_Compile_Aux.Pred</span></span><span class="main"><span>,</span></span><span> 
         </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="entity"><span>io</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Predicate.html#Predicate.pred_of_set|const"><span>pred_of_set</span></a><span>›</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ii</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span>›</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> 
       predfun_data </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span>
         </span><span class="main"><span>(</span></span><span class="entity"><span>io</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Core_Data.PredfunData</span></span><span> </span><span class="main"><span>{</span></span><span>
            elim </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_setE|fact"><span>pred_of_setE</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> intro </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_setI|fact"><span>pred_of_setI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
            neg_intro </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span class="main"><span>,</span></span><span> definition </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_set_eq|fact"><span>pred_of_set_eq</span></a><span class="antiquote"><span>}</span></span></span></span><span>
          </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
         </span><span class="main"><span>(</span></span><span class="entity"><span>ii</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Core_Data.PredfunData</span></span><span> </span><span class="main"><span>{</span></span><span>
            elim </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_predE|fact"><span>contains_predE</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> intro </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_predI|fact"><span>contains_predI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> 
            neg_intro </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_notI|fact"><span>contains_pred_notI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> definition </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_eq|fact"><span>contains_pred_eq</span></a><span class="antiquote"><span>}</span></span></span></span><span>
          </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
       needs_random </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains|const"><span>contains</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred|const"><span>contains_pred</span></a><span>
</span><span class="keyword1"><span class="command"><span>hide_fact</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_setE|fact"><span>pred_of_setE</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_setI|fact"><span>pred_of_setI</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.pred_of_set_eq|fact"><span>pred_of_set_eq</span></a><span> 
  </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.containsI|fact"><span>containsI</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.containsE|fact"><span>containsE</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_predI|fact"><span>contains_predI</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_predE|fact"><span>contains_predE</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_eq|fact"><span>contains_pred_eq</span></a><span> </span><a class="entity_ref" href="Predicate_Compile.html#Predicate_Compile.contains_pred_notI|fact"><span>contains_pred_notI</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>