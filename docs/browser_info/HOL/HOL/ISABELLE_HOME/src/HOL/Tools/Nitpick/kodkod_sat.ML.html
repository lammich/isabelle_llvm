<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>File ‹Tools/Nitpick/kodkod_sat.ML›</title>
</head>


<body>
<div class="head">
<h1>File ‹Tools/Nitpick/kodkod_sat.ML›</h1>
</div>

<pre class="source"><span class="comment1"><span>(*  Title:      HOL/Tools/Nitpick/kodkod_sat.ML
    Author:     Jasmin Blanchette, TU Muenchen
    Copyright   2009, 2010

Kodkod SAT solver integration.
*)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>signature</span></span></span><span> </span><span class="entity"><span>KODKOD_SAT</span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>sig</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> configured_sat_solvers </span><span class="main"><span>:</span></span><span> </span><span>bool</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span> </span><span>list</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> smart_sat_solver_name </span><span class="main"><span>:</span></span><span> </span><span>bool</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> sat_solver_spec </span><span class="main"><span>:</span></span><span> </span><span>Time.time</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span> * </span><span>string</span><span> </span><span>list</span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Kodkod_SAT</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>KODKOD_SAT</span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>struct</span></span></span><span>

</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>Kodkod</span><span>

</span><span class="keyword1"><span class="keyword"><span>datatype</span></span></span><span> </span><span class="entity"><span>sink</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ToStdout</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>ToFile</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>datatype</span></span></span><span> </span><span class="entity"><span>availability</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Java</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>JNI</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>datatype</span></span></span><span> </span><span class="entity"><span>mode</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Batch</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>Incremental</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>datatype</span></span></span><span> </span><span class="entity"><span>sat_solver_info</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="entity"><span>Internal</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> availability * mode * string list </span><span class="main"><span>|</span></span><span>
  </span><span class="entity"><span>External</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> string * string * string list </span><span class="main"><span>|</span></span><span>
  </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> sink * string * string * string * string * string * </span><span class="main"><span>(</span></span><span>Time.time </span><span class="main"><span>-&gt;</span></span><span> string list</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>to_secs</span></span><span> </span><span class="entity"><span>min</span></span><span> </span><span class="entity"><span>time</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Int.max</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>min</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span>Time.toMilliseconds</span><span> </span><span class="entity"><span>time</span></span><span> </span><span>+</span><span> </span><span class="inner_numeral"><span>999</span></span><span class="main"><span>)</span></span><span> </span><span>div</span><span> </span><span class="inner_numeral"><span>1000</span></span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(* for compatibility with "SAT_Solver" *)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>berkmin_exec</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>getenv</span><span> </span><span class="inner_quoted"><span>"BERKMIN_EXE"</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>static_list</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"CryptoMiniSat"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>External</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"CRYPTOMINISAT_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"cryptominisat"</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"MiniSat"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ToFile</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"MINISAT_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"minisat"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"SAT"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>""</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"UNSAT"</span></span><span class="main"><span>,</span></span><span>
      </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"-cpu-lim="</span></span><span> </span><span>^</span><span> </span><span>string_of_int</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>to_secs</span></span><span> </span><span class="inner_numeral"><span>1</span></span><span> </span><span class="entity"><span>timeout</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"zChaff"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ToStdout</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"ZCHAFF_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"zchaff"</span></span><span class="main"><span>,</span></span><span>
      </span><span class="inner_quoted"><span>"Instance Satisfiable"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>""</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"Instance Unsatisfiable"</span></span><span class="main"><span>,</span></span><span> </span><span>K</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"RSat"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ToStdout</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"RSAT_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"rsat"</span></span><span class="main"><span>,</span></span><span>
      </span><span class="inner_quoted"><span>"s SATISFIABLE"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"v "</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"s UNSATISFIABLE"</span></span><span class="main"><span>,</span></span><span> </span><span>K</span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"-s"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"Riss3g"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>External</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"RISS3G_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"riss3g"</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"BerkMin"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ToStdout</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"BERKMIN_HOME"</span></span><span class="main"><span>,</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>berkmin_exec</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>""</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="inner_quoted"><span>"BerkMin561"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>berkmin_exec</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"Satisfiable          !!"</span></span><span class="main"><span>,</span></span><span>
      </span><span class="inner_quoted"><span>"solution ="</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"UNSATISFIABLE          !!"</span></span><span class="main"><span>,</span></span><span> </span><span>K</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"BerkMin_Alloy"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>External</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"BERKMINALLOY_HOME"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"berkmin"</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"SAT4J"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Java</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Incremental</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"DefaultSAT4J"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"SAT4J_Light"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Java</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Incremental</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"LightSAT4J"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"Lingeling_JNI"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>JNI</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Batch</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"Lingeling"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"CryptoMiniSat_JNI"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>JNI</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Batch</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"CryptoMiniSat"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"MiniSat_JNI"</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>JNI</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Incremental</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"MiniSat"</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>dynamic_entry_for_external</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span class="entity"><span>dev</span></span><span> </span><span class="entity"><span>home</span></span><span> </span><span class="entity"><span>exec</span></span><span> </span><span class="entity"><span>args</span></span><span> </span><span class="entity"><span>markers</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>make_args</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>inpath</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span>^</span><span> </span><span>serial_string</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>".cnf"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
        </span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>null</span><span> </span><span class="entity"><span>markers</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="inner_quoted"><span>"External"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="inner_quoted"><span>"ExternalV2"</span></span><span class="main"><span>]</span></span><span> </span><span>@</span><span>
        </span><span class="main"><span>[</span></span><span>File.platform_path</span><span> </span><span class="main"><span>(</span></span><span>Path.variable</span><span> </span><span class="entity"><span>home</span></span><span> </span><span>+</span><span> </span><span>Path.platform_exe</span><span> </span><span class="main"><span>(</span></span><span>Path.basic</span><span> </span><span class="entity"><span>exec</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span>@</span><span>
        </span><span class="main"><span>[</span></span><span class="entity"><span>inpath</span></span><span class="main"><span>]</span></span><span> </span><span>@</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>null</span><span> </span><span class="entity"><span>markers</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>dev</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ToFile</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="inner_quoted"><span>"out"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="inner_quoted"><span>""</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span>@</span><span>
        </span><span class="entity"><span>markers</span></span><span> </span><span>@</span><span> </span><span class="entity"><span>args</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>getenv</span><span> </span><span class="entity"><span>home</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>""</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>NONE</span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span>SOME</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>make_args</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="entity"><span>incremental</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Java</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>mode</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ss</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>incremental</span></span><span> </span><span class="keyword1"><span class="keyword"><span>andalso</span></span></span><span> </span><span class="entity"><span>mode</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Batch</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>NONE</span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span>SOME</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span>K</span><span> </span><span class="entity"><span>ss</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="entity"><span>incremental</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>Internal</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>JNI</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>mode</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ss</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>incremental</span></span><span> </span><span class="keyword1"><span class="keyword"><span>andalso</span></span></span><span> </span><span class="entity"><span>mode</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Batch</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>NONE</span><span>
    </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>exists</span><span> </span><span>File.is_dir</span><span> </span><span class="main"><span>(</span></span><span>Path.split</span><span> </span><span class="main"><span>(</span></span><span>getenv</span><span> </span><span class="inner_quoted"><span>"KODKODI_JAVA_LIBRARY_PATH"</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>SOME</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span>K</span><span> </span><span class="entity"><span>ss</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span>NONE</span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span>false</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>External</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>home</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>exec</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>args</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="entity"><span>dynamic_entry_for_external</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span class="entity"><span>ToStdout</span></span><span> </span><span class="entity"><span>home</span></span><span> </span><span class="entity"><span>exec</span></span><span> </span><span class="entity"><span>args</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span>false</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ExternalV2</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>dev</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>home</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>exec</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>m1</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>m2</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>m3</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>args</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="entity"><span>dynamic_entry_for_external</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span class="entity"><span>dev</span></span><span> </span><span class="entity"><span>home</span></span><span> </span><span class="entity"><span>exec</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>args</span></span><span> </span><span class="entity"><span>timeout</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>m1</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>m2</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>m3</span></span><span class="main"><span>]</span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span>true</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>dynamic_list</span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span class="entity"><span>incremental</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span>map_filter</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>dynamic_entry_for_info</span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span class="entity"><span>incremental</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>static_list</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>configured_sat_solvers</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map</span><span> </span><span>fst</span><span> </span><span>o</span><span> </span><span class="entity"><span>dynamic_list</span></span><span> </span><span>Time.zeroTime</span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>smart_sat_solver_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fst</span><span> </span><span>o</span><span> </span><span>hd</span><span> </span><span>o</span><span> </span><span class="entity"><span>dynamic_list</span></span><span> </span><span>Time.zeroTime</span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>sat_solver_spec</span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>dyns</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>dynamic_list</span></span><span> </span><span class="entity"><span>timeout</span></span><span> </span><span>false</span><span>
    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>enum_solvers</span></span><span> </span><span class="entity"><span>solvers</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span>commas</span><span> </span><span class="main"><span>(</span></span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>quote</span><span> </span><span>o</span><span> </span><span>fst</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>solvers</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="main"><span>(</span></span><span class="entity"><span>name</span></span><span class="main"><span>,</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span>AList.lookup</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>dyns</span></span><span> </span><span class="entity"><span>name</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="keyword"><span>handle</span></span></span><span> </span><span>Option.Option</span><span> </span><span class="main"><span>=&gt;</span></span><span>
           </span><span>error</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>AList.defined</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>static_list</span></span><span> </span><span class="entity"><span>name</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span>
                    </span><span class="inner_quoted"><span>"The SAT solver "</span></span><span> </span><span>^</span><span> </span><span>quote</span><span> </span><span class="entity"><span>name</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" is not configured. The \
                    \following solvers are configured:\n"</span></span><span> </span><span>^</span><span>
                    </span><span class="entity"><span>enum_solvers</span></span><span> </span><span class="entity"><span>dyns</span></span><span>
                  </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span>
                    </span><span class="inner_quoted"><span>"Unknown SAT solver "</span></span><span> </span><span>^</span><span> </span><span>quote</span><span> </span><span class="entity"><span>name</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"\nThe following \
                    \solvers are supported:\n"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>enum_solvers</span></span><span> </span><span class="entity"><span>static_list</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>
</span></pre>
</body>

</html>